# README

## Results

###

The coll (0,1,2,3) takes about 26 secs and (4,5,6,7) takes about 50 secs.

```log
python -m actor.coll.interpreted.example --name coll_bench_w4
[INFO example.py:65 run_coll] Running with CUDA devices 0,1,2,3...
2025-05-05 00:36:06,783 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=2231459) Initializing process group for actor 0...
(Actor pid=2231477) Initializing process group for actor 1...
(Actor pid=2231463) Initializing process group for actor 2...
(Actor pid=2231481) Initializing process group for actor 3...
(Actor pid=2231463) Process group for actor 2 initialized in 3655 ms
(Actor pid=2231477) Process group for actor 1 initialized in 3950 ms
(Actor pid=2231481) Process group for actor 3 initialized in 4723 ms
(Actor pid=2231459) Process group for actor 0 initialized in 4772 ms
(Actor pid=2231459) Running coll for actor 0...
(Actor pid=2231477) Running coll for actor 1...
(Actor pid=2231463) Running coll for actor 2...
(Actor pid=2231481) Running coll for actor 3...
(Actor pid=2231459) Worker 0 reduced tensor: tensor([6.], device='cuda:0') in 26021 ms
(Actor pid=2231477) Worker 1 reduced tensor: tensor([6.], device='cuda:0') in 26032 ms
(Actor pid=2231481) Worker 3 reduced tensor: tensor([6.], device='cuda:0') in 26035 ms
(Actor pid=2231459) Destroying process group for actor 0...
(Actor pid=2231477) Destroying process group for actor 1...
(Actor pid=2231463) Worker 2 reduced tensor: tensor([6.], device='cuda:0') in 26021 ms
(Actor pid=2231463) Destroying process group for actor 2...
(Actor pid=2231481) Destroying process group for actor 3...
[INFO example.py:65 run_coll] Running with CUDA devices 4,5,6,7...
2025-05-05 00:36:51,610 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=2255189) Initializing process group for actor 1...
(Actor pid=2255197) Initializing process group for actor 3...
(Actor pid=2255211) Initializing process group for actor 0...
(Actor pid=2255471) Initializing process group for actor 2...
(Actor pid=2255471) Process group for actor 2 initialized in 3922 ms
(Actor pid=2255189) Process group for actor 1 initialized in 4502 ms
(Actor pid=2255189) Running coll for actor 1...
(Actor pid=2255197) Process group for actor 3 initialized in 4745 ms
(Actor pid=2255197) Running coll for actor 3...
(Actor pid=2255211) Process group for actor 0 initialized in 4710 ms
(Actor pid=2255211) Running coll for actor 0...
(Actor pid=2255471) Running coll for actor 2...
(Actor pid=2255189) Worker 1 reduced tensor: tensor([6.], device='cuda:0') in 52482 ms
(Actor pid=2255189) Destroying process group for actor 1...
(Actor pid=2255197) Worker 3 reduced tensor: tensor([6.], device='cuda:0') in 52479 ms
(Actor pid=2255197) Destroying process group for actor 3...
(Actor pid=2255211) Worker 0 reduced tensor: tensor([6.], device='cuda:0') in 52476 ms
(Actor pid=2255211) Destroying process group for actor 0...
(Actor pid=2255471) Worker 2 reduced tensor: tensor([6.], device='cuda:0') in 52480 ms
(Actor pid=2255471) Destroying process group for actor 2...
```

###

The first coll takes about 3 -- 30 secs.
The fastest pairs are (1,2) with 3 secs and (2,3) with 20 secs.
Others take about 50 secs.

```log
python -m actor.coll.interpreted.example --name coll_bench
[INFO example.py:71 run_coll] Running with CUDA devices 0,1...
2025-05-05 00:21:07,640 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=1889499) Initializing process group for actor 0...
(Actor pid=1889503) Process group for actor 1 initialized in 3200 ms
(Actor pid=1889499) Running coll for actor 0...
(Actor pid=1889499) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 33308 ms
(Actor pid=1889499) Destroying process group for actor 0...
(Actor pid=1889503) Initializing process group for actor 1...
(Actor pid=1889499) Process group for actor 0 initialized in 3439 ms
(Actor pid=1889503) Running coll for actor 1...
(Actor pid=1889503) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 33309 ms
(Actor pid=1889503) Destroying process group for actor 1...
[INFO example.py:71 run_coll] Running with CUDA devices 1,2...
2025-05-05 00:21:56,982 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=1916338) Initializing process group for actor 1...
(Actor pid=1916326) Process group for actor 0 initialized in 4546 ms
(Actor pid=1916326) Running coll for actor 0...
(Actor pid=1916338) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 3097 ms
(Actor pid=1916326) Initializing process group for actor 0...
(Actor pid=1916326) Destroying process group for actor 0...
(Actor pid=1916338) Process group for actor 1 initialized in 4568 ms
(Actor pid=1916338) Running coll for actor 1...
(Actor pid=1916326) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 3115 ms
(Actor pid=1916338) Destroying process group for actor 1...
[INFO example.py:71 run_coll] Running with CUDA devices 2,3...
2025-05-05 00:22:17,671 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=1936496) Initializing process group for actor 1...
(Actor pid=1936496) Process group for actor 1 initialized in 2500 ms
(Actor pid=1936496) Running coll for actor 1...
(Actor pid=1936496) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 19484 ms
(Actor pid=1936496) Destroying process group for actor 1...
(Actor pid=1936493) Initializing process group for actor 0...
(Actor pid=1936493) Process group for actor 0 initialized in 2422 ms
(Actor pid=1936493) Running coll for actor 0...
(Actor pid=1936493) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 19485 ms
(Actor pid=1936493) Destroying process group for actor 0...
[INFO example.py:71 run_coll] Running with CUDA devices 3,4...
2025-05-05 00:22:51,053 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=1956467) Initializing process group for actor 1...
(Actor pid=1956467) Process group for actor 1 initialized in 3340 ms
(Actor pid=1956467) Running coll for actor 1...
(Actor pid=1956467) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 50448 ms
(Actor pid=1956467) Destroying process group for actor 1...
(Actor pid=1956472) Initializing process group for actor 0...
(Actor pid=1956472) Process group for actor 0 initialized in 3272 ms
(Actor pid=1956472) Running coll for actor 0...
(Actor pid=1956472) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 50455 ms
(Actor pid=1956472) Destroying process group for actor 0...
[INFO example.py:71 run_coll] Running with CUDA devices 4,5...
2025-05-05 00:23:57,590 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=1981306) Initializing process group for actor 1...
(Actor pid=1981291) Process group for actor 0 initialized in 2720 ms
(Actor pid=1981291) Running coll for actor 0...
(Actor pid=1981291) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 48518 ms
(Actor pid=1981291) Destroying process group for actor 0...
(Actor pid=1981291) Initializing process group for actor 0...
(Actor pid=1981306) Process group for actor 1 initialized in 2850 ms
(Actor pid=1981306) Running coll for actor 1...
(Actor pid=1981306) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 48518 ms
(Actor pid=1981306) Destroying process group for actor 1...
[INFO example.py:71 run_coll] Running with CUDA devices 5,6...
2025-05-05 00:25:00,877 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=2008250) Initializing process group for actor 0...
(Actor pid=2008250) Process group for actor 0 initialized in 2631 ms
(Actor pid=2008250) Running coll for actor 0...
(Actor pid=2008250) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 48630 ms
(Actor pid=2008250) Destroying process group for actor 0...
(Actor pid=2008284) Initializing process group for actor 1...
(Actor pid=2008284) Process group for actor 1 initialized in 2658 ms
(Actor pid=2008284) Running coll for actor 1...
(Actor pid=2008284) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 48632 ms
(Actor pid=2008284) Destroying process group for actor 1...
[INFO example.py:71 run_coll] Running with CUDA devices 6,7...
2025-05-05 00:26:04,371 INFO worker.py:1888 -- Started a local Ray instance.
(Actor pid=2032791) Initializing process group for actor 1...
(Actor pid=2032807) Process group for actor 0 initialized in 2096 ms
(Actor pid=2032791) Running coll for actor 1...
(Actor pid=2032791) Worker 1 reduced tensor: tensor([3.], device='cuda:0') in 30509 ms
(Actor pid=2032791) Destroying process group for actor 1...
(Actor pid=2032807) Initializing process group for actor 0...
(Actor pid=2032791) Process group for actor 1 initialized in 2501 ms
(Actor pid=2032807) Running coll for actor 0...
(Actor pid=2032807) Worker 0 reduced tensor: tensor([3.], device='cuda:0') in 30511 ms
(Actor pid=2032807) Destroying process group for actor 0...
```
